{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/2022-12-12-weird-encoding-bug/","result":{"data":{"site":{"siteMetadata":{"title":"Beveloper","heroImage":"/images/beveloper-hero.jpg"}},"markdownRemark":{"id":"49c5aeec-8222-55f0-bb02-8023842f2111","excerpt":"While scrapting data, got result: finally displays: Python's fault? At the very beggining, I thought  = , just because Python's  module doesn't decode  at a…","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0ccf46adc6f68a126a3d41993c571fbd/be3c7/euro-statue.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.32911392405063%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGgAAAQUBAAAAAAAAAAAAAAAAAAECAwQFBv/EABYBAQEBAAAAAAAAAAAAAAAAAAIAAf/aAAwDAQACEAMQAAABatKVZunPgv/EABoQAAMBAAMAAAAAAAAAAAAAAAECAwAREjH/2gAIAQEAAQUCFWYT9RuBPITpsev/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAWEQEBAQAAAAAAAAAAAAAAAAABECH/2gAIAQIBAT8BNJ//xAAZEAACAwEAAAAAAAAAAAAAAAAAMQEQQVH/2gAIAQEABj8CT4bUDGf/xAAaEAADAQEBAQAAAAAAAAAAAAAAASERMWGB/9oACAEBAAE/IcJGoEuJbSD6M/ps1Ja42LtjdP/aAAwDAQACAAMAAAAQkD//xAAWEQEBAQAAAAAAAAAAAAAAAAABECH/2gAIAQMBAT8QcSf/xAAXEQADAQAAAAAAAAAAAAAAAAAAARFh/9oACAECAQE/EGphT//EAB4QAAICAgIDAAAAAAAAAAAAAAERACExQVFhcaHx/9oACAEBAAE/EKc5wCtUM3GuXJnK6v7BEBrh4EMFjQN8Bj3DKhs7TcVjZk3up//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"the euro statue\"\n        title=\"the euro statue\"\n        src=\"/static/0ccf46adc6f68a126a3d41993c571fbd/828fb/euro-statue.jpg\"\n        srcset=\"/static/0ccf46adc6f68a126a3d41993c571fbd/ff44c/euro-statue.jpg 158w,\n/static/0ccf46adc6f68a126a3d41993c571fbd/a6688/euro-statue.jpg 315w,\n/static/0ccf46adc6f68a126a3d41993c571fbd/828fb/euro-statue.jpg 630w,\n/static/0ccf46adc6f68a126a3d41993c571fbd/0ede0/euro-statue.jpg 945w,\n/static/0ccf46adc6f68a126a3d41993c571fbd/3ac88/euro-statue.jpg 1260w,\n/static/0ccf46adc6f68a126a3d41993c571fbd/be3c7/euro-statue.jpg 1320w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>While scrapting data, got result:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">... \\u00e2\\u0082\\u00ac143m ...</code></pre></div>\n<p>finally displays:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">... â¬143m ...</code></pre></div>\n<h2>Python's fault?</h2>\n<p>At the very beggining, I thought <code class=\"language-text\">\\u00e2\\u0082\\u00ac</code> = <code class=\"language-text\">€</code>, just because Python's <code class=\"language-text\">json</code> module doesn't decode <code class=\"language-text\">unicode</code> at a proper way.</p>\n<p>Later I found,</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">`€` = `U+20AC` (unicode)\n    = `\\u20AC` (Python3 source code)\n    = `0xE2 0x82 0xAC` (utf-8)</code></pre></div>\n<p>It looks like, <code class=\"language-text\">€</code> is encoded from <code class=\"language-text\">0xE2 0x82 0xAC</code> to <code class=\"language-text\">\\u00e2\\u0082\\u00ac</code> by mistake.</p>\n<h2>It is a bug from very beginning</h2>\n<p>Googled a bit, found <a href=\"https://www.i18nqa.com/debug/utf8-debug.html\">this page</a> on <a href=\"i18nqa.com\">i18nqa.com</a></p>\n<p>The chart in it shows clearly:</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">Unicode</th>\n<th align=\"center\">Windows 1252</th>\n<th align=\"center\">Expected</th>\n<th align=\"center\">Actual</th>\n<th align=\"center\">UTF-8 Bytes</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">U+20AC</td>\n<td align=\"center\">0x80</td>\n<td align=\"center\">€</td>\n<td align=\"center\">â‚¬</td>\n<td align=\"center\">%E2 %82 %AC</td>\n</tr>\n</tbody>\n</table>\n<blockquote>\n<p>... the problem is being caused by UTF-8 bytes being interpreted as Windows-1252 (or ISO 8859-1) bytes ...</p>\n</blockquote>\n<p>In <a href=\"https://docs.python.org/3.9/library/codecs.html#standard-encodings\">Standard Encodings section of Python's official doc</a>, <code class=\"language-text\">iso-8859-1</code> is the alias of <code class=\"language-text\">latin_1</code>.</p>\n<h2>So the final solution is:</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token string\">\"\\u00e2\\u0082\\u00ac\"</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token string\">\"latin_1\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># b'\\xe2\\x82\\xac'</span>\n<span class=\"token string\">\"\\u00e2\\u0082\\u00ac\"</span><span class=\"token punctuation\">.</span>encode<span class=\"token punctuation\">(</span><span class=\"token string\">\"latin_1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>decode<span class=\"token punctuation\">(</span><span class=\"token string\">\"utf-8\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># '€'</span></code></pre></div>","frontmatter":{"title":"Weird Encoding Bug: Why \"€\" is displayed as \"â¬\" garbled characters?","date":"2022-12-12T02:00:00+00:00","description":"\"€\", \"U+20AC\", \"\\u00e2\\u0082\\u00ac\", \"â¬\", what's the implicit relationship of them?","featuredImageUrl":"https://menafn.com/updates/pr/Menafn_News_Images/Local_Economy_223.jpg"}},"previous":{"fields":{"slug":"/2023-02-07-the-feeling-of-scrolling-of-flutter-web/"},"frontmatter":{"title":"The Weird Feeling of Scrolling of Flutter Web"}},"next":{"fields":{"slug":"/new-beginnings/"},"frontmatter":{"title":"New Beginnings"}}},"pageContext":{"id":"49c5aeec-8222-55f0-bb02-8023842f2111","previousPostId":"337739fc-1457-57de-95a9-1387ec50f4bf","nextPostId":"b42324f2-9f03-5f88-a182-dc42c6590297"}},"staticQueryHashes":["1261413882","2660733687"]}